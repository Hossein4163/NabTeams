# راهنمای استفاده از سامانه NabTeams

این راهنما به شما کمک می‌کند تا مراحل ثبت‌نام تیم، پیگیری وضعیت، پرداخت مرحله دوم و دریافت تحلیل هوش مصنوعی از طرح کسب‌وکار را انجام دهید.

## ۱. ثبت‌نام تیم شرکت‌کننده
1. به نشانی `/register/participant` مراجعه کنید.
2. فرم چندمرحله‌ای را تکمیل کنید:
   - **مشخصات سرپرست** شامل نام، شماره تماس، کد ملی و تحصیلات.
   - **اعضای تیم**؛ می‌توانید حداکثر ۱۰ نفر را با نقش و حوزه فعالیت اضافه کنید.
   - **مدارک و فایل‌ها**؛ فایل رزومه، پروژه یا ارائه را آپلود کنید (حداکثر ۲۵ مگابایت به ازای هر فایل).
   - **لینک‌ها**؛ آدرس‌های مرتبط (گیت‌هاب، لینکدین، دمو و ...).
3. در مرحلهٔ «بازبینی» می‌توانید تمام اطلاعات را یکجا بررسی و ذخیره کنید.
4. با فشردن «تأیید نهایی» درخواست ثبت می‌شود و شناسهٔ پیگیری در اختیار شما قرار می‌گیرد.
5. پس از نهایی‌سازی، سامانه به‌طور خودکار یک فایل خلاصهٔ متنی شامل مشخصات تیم، اعضا، مدارک و تحلیل‌های انجام‌شده تولید می‌کند تا در اختیار داوران و ادمین قرار گیرد.

> **نکته:** هر زمان قبل از تأیید نهایی می‌توانید از طریق همان صفحه اطلاعات را ویرایش کنید. پس از تأیید نهایی فقط ادمین قادر به تغییر وضعیت است.

## ۲. پیگیری وضعیت ثبت‌نام
1. به داشبورد وضعیت در `/dashboard/registration` بروید.
2. شناسهٔ ثبت‌نام (GUID) را در کادر وارد و روی «بررسی وضعیت» کلیک کنید.
3. صفحه شامل اطلاعات زیر خواهد بود:
   - وضعیت جاری (ارسال شده، تأیید شده، درخواست پرداخت، پرداخت تکمیل شده و ...).
   - تاریخ ثبت و تأیید نهایی.
   - جزئیات اعضای تیم و مدارک ارسال شده.
   - اعلان‌های ایمیل/پیامک که برای تیم ارسال شده‌اند.

## ۳. پرداخت مرحله دوم
1. پس از تایید ادمین، وضعیت به «در انتظار پرداخت» تغییر می‌کند و لینک پرداخت در داشبورد ظاهر می‌شود.
2. روی لینک کلیک کرده و تراکنش را در درگاه پرداخت انجام دهید.
3. پس از بازگشت به سامانه، وضعیت به شکل خودکار به «پرداخت تکمیل شد» تغییر کرده و ایمیل/پیامک تأیید دریافت می‌کنید.

> اگر پرداخت انجام شد اما وضعیت به‌روزرسانی نشد، شناسه تراکنش را در اختیار تیم پشتیبانی قرار دهید تا از مسیر `/api/registrations/participants/{id}/payments/complete` تأیید شود.

## ۴. دریافت تحلیل بیزینس‌پلن با هوش مصنوعی
1. در داشبورد وضعیت (زیر بخش پرداخت) فرم «تحلیل بیزینس‌پلن» را تکمیل کنید.
2. می‌توانید با دکمهٔ «تولید خودکار خلاصه» توضیحی بر اساس اطلاعات ثبت‌نام دریافت کرده و سپس آن را ویرایش کنید.
3. در صورت تمایل نکات تکمیلی (سوالات یا فرضیات) را در باکس دوم بنویسید.
4. روی «ارسال برای تحلیل هوش مصنوعی» کلیک کنید.
5. پس از چند ثانیه نتیجه شامل **خلاصهٔ تحلیلی**، **نقاط قوت**، **ریسک‌ها**، **پیشنهادهای بهبود** و **امتیاز کلی (۰ تا ۱۰۰)** نمایش داده می‌شود.
6. همهٔ تحلیل‌های قبلی در همان بخش آرشیو شده و قابل مشاهده‌اند.

> فایل‌های آپلودشده (رزومه، پرزنتیشن و ...) به صورت خودکار برای هوش مصنوعی ارسال می‌شوند تا تحلیل دقیق‌تری انجام شود. در صورت تغییر فایل‌ها دوباره ثبت‌نام را ویرایش و ذخیره کنید.

## ۵. اعلان‌ها
- سامانه برای رویدادهای مهم (تأیید ادمین، درخواست پرداخت، موفقیت پرداخت) از طریق ایمیل یا پیامک اطلاع‌رسانی می‌کند.
- تاریخچهٔ اعلان‌ها در پایین داشبورد وضعیت نمایش داده می‌شود و شامل عنوان، گیرنده و متن پیام است.

## ۶. تنظیمات یکپارچه‌سازی برای ادمین‌ها
ادمین‌ها می‌توانند بدون ویرایش فایل‌های پیکربندی، کلیدهای API و اطلاعات سرویس‌های جانبی را از مسیر `/dashboard/admin/integrations` مدیریت کنند:

1. پس از ورود با نقش ادمین، روی کارت «🔐 پیکربندی کلیدها و درگاه‌ها» در صفحهٔ اصلی کلیک کنید.
2. در لیست بالای صفحه می‌توانید رکوردهای موجود را بر اساس نوع (Gemini، درگاه پرداخت، پیامک، ایمیل) فیلتر و وضعیت فعال/غیرفعال هر رکورد را مشاهده کنید.
3. برای ویرایش، روی دکمهٔ «ویرایش» کلیک کنید تا فرم پایین صفحه با مقادیر فعلی پر شود؛ برای ایجاد رکورد جدید روی «تنظیم جدید» بزنید.
4. مقدار فیلد «پیکربندی JSON» باید مطابق با پارامترهای همان سرویس باشد. نمونه‌ها:
   - **Gemini:**
     ```json
     {
       "ApiKey": "...",
       "BaseUrl": "https://generativelanguage.googleapis.com",
       "BusinessPlanModel": "gemini-1.5-pro"
     }
     ```
   - **درگاه پرداخت (IdPay):**
     ```json
     {
       "Provider": "idpay",
       "BaseUrl": "https://api.idpay.ir",
       "ApiKey": "...",
       "CallbackBaseUrl": "https://portal.example.com",
       "Sandbox": true
     }
     ```
5. اگر گزینهٔ «پس از ذخیره فعال شود» را تیک بزنید، رکورد جدید به عنوان تنظیم فعال آن نوع انتخاب می‌شود و سرویس‌ها بلافاصله از آن استفاده می‌کنند.
6. برای حذف رکورد یا فعال‌سازی دستی، از دکمه‌های موجود در جدول استفاده کنید. حذف رکورد فعال باعث می‌شود سرویس از مقدار پیش‌فرض (پیکربندی فایل) استفاده کند.
7. در صورت نیاز می‌توانید مقدار JSON هر سرویس را در متغیرهای محیطی `INTEGRATIONS__*` قرار دهید تا هنگام راه‌اندازی به صورت خودکار همان تنظیم در پایگاه‌داده ذخیره و فعال شود؛ پس از استارت، وضعیت رکورد را در همین صفحه بررسی کنید.

## ۷. چک‌لیست امنیت و عملیات برای ادمین‌ها
برای اطمینان از آماده‌سازی محیط تولید، صفحهٔ `/dashboard/admin/operations` فهرستی از آیتم‌های امنیتی و عملیاتی را در اختیار ادمین قرار می‌دهد:

1. کارت «🛡️ چک‌لیست امنیت و عملیات» را در داشبورد انتخاب کنید تا فهرست آیتم‌ها (اسکن امنیتی، مانیتورینگ، آموزش اپراتورها، تست بار، پیکربندی کلیدها، فضای ذخیره‌سازی و سیاست حریم خصوصی) نمایش داده شود.
2. برای هر آیتم وضعیت (در انتظار، در حال اجرا، تکمیل‌شده)، توضیح کوتاه و در صورت نیاز لینک مستندات یا گزارش را وارد کنید.
3. با کلیک روی «ذخیره تغییرات» وضعیت در پایگاه‌داده ثبت می‌شود و زمان تکمیل برای آیتم‌های «تکمیل‌شده» به‌صورت خودکار ذخیره خواهد شد.
4. تیم DevOps می‌تواند از این صفحه برای مستندسازی پیشرفت چک‌لیست انتشار استفاده کند؛ وضعیت‌ها در هر بار بارگذاری مجدد صفحه تازه‌سازی می‌شوند.

> نکته: لینک مستندات می‌تواند به خروجی اسکن OWASP ZAP، داشبورد مانیتورینگ یا سند سیاست حریم خصوصی اشاره کند تا دسترسی سریع برای ممیزی فراهم شود.

## ۸. نکات فنی و محدودیت‌ها
- حجم هر فایل آپلودی حداکثر ۲۵ مگابایت است.
- برای امنیت، لینک‌های پرداخت و فایل‌های تحلیل تنها با داشتن شناسهٔ تیم قابل مشاهده‌اند؛ شناسه را در اختیار افراد غیرمرتبط قرار ندهید.
- در صورتی که API Gemini در دسترس نباشد، پیام خطا نمایش داده می‌شود و می‌توانید بعداً دوباره تلاش کنید.

برای اطلاعات بیشتر درباره استقرار و تنظیم متغیرهای محیطی به بخش «متغیرهای محیطی» در README مراجعه کنید.
